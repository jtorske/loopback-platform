<div class="page">
  <div class="shell">
    <div class="toolbar">
      <div class="search-wrapper">
        <input
          type="text"
          class="search-input"
          placeholder="Search products"
          aria-label="Search products"
          (input)="onSearch($any($event.target).value)"
        />
      </div>

      <select class="filter-select" (change)="onSortChange($any($event.target).value)">
        <option value="none">Sort: Default</option>
        <option value="name-asc">Name (A-Z)</option>
        <option value="name-desc">Name (Z-A)</option>
        <option value="price-asc">Price (Low → High)</option>
        <option value="price-desc">Price (High → Low)</option>
      </select>
    </div>

    <!-- MOBILE TOOLBAR -->
    <div class="toolbar-mobile">
      <h1 class="mobile-title">Products</h1>

      <div class="mobile-search-row">
        <input
          type="text"
          class="search-input"
          placeholder="Search"
          (input)="onSearch($any($event.target).value)"
        />

        <button class="mobile-filter-btn" (click)="openMobileFilter()">
          <i class="fa-solid fa-sliders"></i>
        </button>
      </div>
    </div>

    <div class="mobile-filter-panel" [class.open]="mobileFilterOpen">
      <h2 class="filter-title">Filters</h2>

      <label class="filter-label">Sort By</label>
      <select class="filter-select-mobile" (change)="onSortChange($any($event.target).value)">
        <option value="none">Default</option>
        <option value="name-asc">Name (A-Z)</option>
        <option value="name-desc">Name (Z-A)</option>
        <option value="price-asc">Price (Low → High)</option>
        <option value="price-desc">Price (High → Low)</option>
      </select>

      <button class="filter-close-btn" (click)="closeMobileFilter()">Done</button>
    </div>

    <div class="products-list">
      <article class="product-card" *ngFor="let product of filteredProducts">
        <div class="product-image-wrapper">
          <img class="product-image" [src]="product.image_url" alt="Product image" />
        </div>

        <div class="product-content">
          <div class="product-grid">
            <div class="product-name">{{ product.name }}</div>

            <div class="company-name clickable" (click)="goToCompany(product.company_id)">
              {{ product.company }}
            </div>

            <div class="price">$ {{ product.price }}</div>

            <div class="product-sku" *ngIf="product.sku">SKU: {{ product.sku }}</div>
          </div>
        </div>

        <div class="product-actions">
          <button class="btn btn-primary review-btn" type="button" (click)="onReview(product)">
            <span class="review-text">Review</span>
            <i class="fa-solid fa-pen review-icon"></i>
          </button>
        </div>
      </article>
    </div>
  </div>
</div>
