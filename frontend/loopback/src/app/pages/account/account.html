<div class="account-page">
  <div class="account-layout">
    <div class="account-card">
      <h1 class="title title-lg">Account</h1>
      <div class="account-details">
        <img src="assets/account.png" alt="Profile Image" class="profile-img" />
        <div class="account-info-group">
          <p class="account-title">{{ user.username }}</p>
          <p class="account-info">{{ user.email }}</p>
          <p class="account-info">{{ user.role }}</p>
          <div class="account-actions">
            <button class="edit-btn" (click)="editAccount()">Edit</button>
            <button class="logout-btn" (click)="logout()">Log out</button>
          </div>
        </div>
      </div>

      <div class="stats-card">
        <div class="stats-header">
          User Stats
        </div>

        <div class="stats-body">

          <div class="stats-row">
            <div class="stats-icon">
              <img src="assets/suggestions.svg" alt="Suggestions" />
            </div>
            <div class="stats-label">Enhancements</div>
            <div class="stats-value">{{ suggestions || 0 }}</div>
          </div>

          <div class="stats-row">
            <div class="stats-icon">
              <img src="assets/bugReports.svg" alt="Bug Reports" />
            </div>
            <div class="stats-label">Bug Reports</div>
            <div class="stats-value">{{ bugReports || 0 }}</div>
          </div>

          <div class="stats-row">
            <div class="stats-icon">
              <img src="assets/praises.svg" alt="Praises" />
            </div>
            <div class="stats-label">Praises</div>
            <div class="stats-value">{{ praises || 0 }}</div>
          </div>

        </div>
      </div>
    </div>
    <div class="side-cards">
      <div class="activity-card">
        <h1 class="title title-md">Recent Activity</h1>
        <div class="activity-body">
          <div *ngFor="let activity of recentActivity">
            <div class="activity-row">
              <div class="activity-left">
                <div class="activity-title">{{ activity.title }}</div>
                <div class="activity-product">Product ID:{{ activity.product_id }}</div>
                <div class="activity-feedback">{{ activity.body }}</div>
              </div>
              <div class="activity-right">
                <div class="stats-icon">
                  <img [src]="getFeedbackTypeImage(activity.feedback_type_id)" alt="Feedback Type" />
                </div>
              </div>
            </div>
          </div>

        </div>
        <button class="activity-btn" (click)="routeToProducts()">Create New Review</button>
      </div>
    </div>
    <div class="modal-backdrop" *ngIf="showEditModal">
      <div class="modal">
        <h2>Edit Account Details</h2>
        <form #editForm="ngForm" (ngSubmit)="saveAccountDetails(editForm.value)">
          <label>
            Name:
            <input type="text" name="name" [ngModel]="user.username" required />
          </label>
          <label>
            Email:
            <input type="email" name="email" [ngModel]="user.email" required />
          </label>
          <div class="modal-actions">
            <button type="submit">Save</button>
            <button type="button" (click)="closeEditModal()">Cancel</button>
          </div>
        </form>
      </div>
    </div>
    <div class="modal-backdrop" *ngIf="showEditModal">
      <div class="modal">
        <h2>Edit Account Details</h2>
        <form #editForm="ngForm" (ngSubmit)="saveAccountDetails(editForm.value)">
          <label>
            Name:
            <input type="text" name="name" [ngModel]="user.username" required />
          </label>
          <label>
            Email:
            <input type="email" name="email" [ngModel]="user.email" required />
          </label>
          <div class="modal-actions">
            <button type="submit">Save</button>
            <button type="button" (click)="closeEditModal()">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>